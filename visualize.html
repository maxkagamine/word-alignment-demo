<!DOCTYPE html>
<html>
<head>
<title>Alignment Visualizer</title>
<style>
body {
  font-family: sans-serif;
  font-size: 20px;
  margin: 0.5em;
}
body.dark {
  background: #111;
  color: #fff;
  color-scheme: dark;
}
#form {
  margin: 0 0 2em;
  padding: 0;
  border: none;
  text-wrap: nowrap;
}
label, select, button, #form fieldset {
  display: inline-block;
  margin: 0.5em;
}
label select {
  margin: 0;
}
#form fieldset {
  padding: 0 0.5em 0.33em;
}
legend {
  font-size: 0.75em;
  opacity: 0.9;
}
input:not([type="checkbox"]) {
  width: 500px;
}
input[type="number"] {
  width: 55px;
}
input, select, button {
  font-size: inherit;
}
#swapButton {
  position: relative;
  top: 1.25em;
  margin-left: 0;
}
svg {
  width: 100%;
}
.loading {
  opacity: 0;
}
#download {
  display: inline-block;
  margin-top: 2em;
}
</style>
</head>
<body>

  <fieldset id="form">
    <div>
      <label>From text: <input id="fromTextInput" value="瑞鳳です。軽空母ですが、練度が上がれば、正規空母並の活躍をお見せできます。" /></label>
      <button id="swapButton">⤪</button>
    </div>
    <div><label>To text: <input id="toTextInput" value="I'm Zuihou. Even though I'm a light carrier, I can show you that I'll be as good as standard carriers with some experience." /></label></div>
    <div>
      <fieldset>
        <legend>WSP</legend>
        <label>Threshold: <input id="wspThresholdInput" type="number" value="0.1" min="0" max="1" step="0.1" /></label>
        <label><input id="wspSymmetricCheckbox" type="checkbox" /> <abbr title="Combines the results of reverse alignment.">Symmetric</abbr></label>
        <button id="alignWspButton">Align</button>
      </fieldset>
      <fieldset>
        <legend>Awesome</legend>
        <label>
          Model:
          <select id="awesomeModelDropdown">
            <option value="bert-base-multilingual-cased">bert base</option>
            <option value="./models/model_with_co">model w/ co</option>
            <option value="./models/model_without_co" selected>model w/o co</option>
          </select>
        </label>
        <button id="alignAwesomeButton">Align</button>
      </fieldset>
    </div>
    <div>
      <label>Alignment result: <input id="alignmentResultInput" value="0,2,4,10,2,4,0,3,4,5,10,11,5,6,30,35,6,8,36,43,8,10,25,27,10,11,12,23,11,12,43,44,15,18,73,80,18,19,70,72,20,22,84,92,22,24,93,101,25,26,73,83,26,28,112,122,29,30,102,106,30,32,51,59,32,34,47,50,34,36,47,50,36,37,122,123" /></label>
      <label><input id="darkMode" type="checkbox" checked /> Dark mode</label>
      <select id="paletteDropdown">
        <option value="material" selected>Material</option>
        <option value="one">One Light/Dark</option>
      </select>
    </div>
  </fieldset>

  <div id="output"></div>

  <a id="download" href="#" hidden>Download SVG</a>

  <script>
    const EM = 30;
    const TEXT_SPACING = 7 * EM;
    const LINE_SPACING = 0.33 * EM;

    // Offsets where the lines *appear* to start/end (or actually do, if
    // LINE_SPACING is set to 0) to bring it closer to the actual text.
    const LINE_ORIGIN_OFFSET = 0.3 * EM;

    const FROM_TEXT_ID = 'fromText';
    const TO_TEXT_ID = 'toText';

    const form = document.getElementById('form');
    const fromTextInput = document.getElementById('fromTextInput');
    const toTextInput = document.getElementById('toTextInput');
    const alignmentResultInput = document.getElementById('alignmentResultInput');
    const darkMode = document.getElementById('darkMode');
    const paletteDropdown = document.getElementById('paletteDropdown');
    const outputEl = document.getElementById('output');
    const dlLink = document.getElementById('download');
    const alignWspButton = document.getElementById('alignWspButton');
    const alignAwesomeButton = document.getElementById('alignAwesomeButton');
    const awesomeModelDropdown = document.getElementById('awesomeModelDropdown');
    const wspThresholdInput = document.getElementById('wspThresholdInput');
    const wspSymmetricCheckbox = document.getElementById('wspSymmetricCheckbox');
    const swapButton = document.getElementById('swapButton');

    fromTextInput.addEventListener('input', render);
    toTextInput.addEventListener('input', render);
    alignmentResultInput.addEventListener('input', render);
    darkMode.addEventListener('change', render);
    paletteDropdown.addEventListener('change', render);
    render();

    dlLink.addEventListener('click', () => {
      const svg = document.querySelector('#output svg');
      const blob = new Blob([createDownloadableSvg(svg)], { type: 'text/svg' });
      dlLink.href = URL.createObjectURL(blob);
    });

    alignWspButton.addEventListener('click', () => align('wsp'));
    alignAwesomeButton.addEventListener('click', () => align('awesome'));

    swapButton.addEventListener('click', () => {
      const fromText = fromTextInput.value;
      fromTextInput.value = toTextInput.value;
      toTextInput.value = fromText;
    });

    form.addEventListener('submit', e => e.preventDefault());

    async function align(method) {
      form.disabled = true;
      alignmentResultInput.value = 'IMA FIRIN MAH LAZER!!!';
      try {
        const res = await fetch('/align', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          cache: 'no-cache',
          body: JSON.stringify({
            method,
            fromLanguage: isJapanese(fromTextInput.value) ? 'ja' : 'en',
            fromText: fromTextInput.value,
            toLanguage: isJapanese(toTextInput.value) ? 'ja' : 'en',
            toText: toTextInput.value,
            awesomeModel: awesomeModelDropdown.value,
            wspThreshold: wspThresholdInput.value,
            wspSymmetric: wspSymmetricCheckbox.checked,
          })
        });
        const json = await res.json();

        alignmentResultInput.value = json.result;
        form.disabled = false;

        render();
      } catch (e) {
        console.error(e);
        alignmentResultInput.value = 'ERROR';
        form.disabled = false;
      }
    }

    function render() {
      document.body.classList.toggle('dark', darkMode.checked);

      const fromText = fromTextInput.value;
      const toText = toTextInput.value;

      let alignmentResult = parseAlignmentResult(alignmentResultInput.value);
      alignmentResult = mergeAlignments(alignmentResult, fromText, toText);
      alignmentResult = removePunctuationAlignments(alignmentResult, fromText, toText);

      console.log('fromText =', fromText);
      console.log('toText =', toText);
      console.log('alignmentResult =', alignmentResult);

      outputEl.innerHTML = '';
      outputEl.classList.add('loading');

      if (!fromText || !toText || !alignmentResult.length) {
        return;
      }

      const palette = createPalette(paletteDropdown.value, darkMode.checked);

      const svg = createSvgElement('svg');
      svg.setAttribute('version', '1.1');
      svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
      svg.setAttribute('viewBox', '0 0 10000 5000'); // For some reason Chrome doesn't calculate off-screen text's bbox correctly.
      outputEl.appendChild(svg);

      const style = createSvgElement('style');
      style.innerHTML = `@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap');
text {
  font-family: 'Noto Sans JP', sans-serif;
  font-size: ${EM}px;${darkMode.checked ? `
  fill: #fff;` : ''}
}`;
      svg.appendChild(style);

      const fromTextEl = createTextElement(fromText, FROM_TEXT_ID, { x: 0, y: 0 });
      const toTextEl = createTextElement(toText, TO_TEXT_ID, { x: 0, y: TEXT_SPACING });
      svg.appendChild(fromTextEl);
      svg.appendChild(toTextEl);

      centerHorizontally(fromTextEl, toTextEl);

      for (let i = 0; i < alignmentResult.length; i++) {
        const { fromStart, fromEnd, toStart, toEnd } = alignmentResult[i];

        console.log(`Drawing alignment for ${fromText.substring(fromStart, fromEnd)} (${fromStart}) => ${toText.substring(toStart, toEnd)} (${toStart})`);
        drawAlignment(svg, fromStart, fromEnd, toStart, toEnd, palette[i % palette.length]);
      }

      setViewBox(svg);
      setTimeout(() => setViewBox(svg), 10); // Hack
      setTimeout(() => setViewBox(svg), 100); // Hack
      setTimeout(() => setViewBox(svg), 1000); // Hackity hack

      outputEl.classList.remove('loading');

      let filename = isJapanese(fromText) ? toText : fromText;
      filename = filename.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
      filename = filename.substr(0, 40).replace(/-[^-]*$/, '');
      filename = `alignment_${filename}_${darkMode.checked ? 'dark' : 'light'}.svg`;
      // const filename = `${filenameTitle.substr(0, FILENAME_LENGTH).trim()}${filenameTitle.length > FILENAME_LENGTH ? '...' : ''} (${darkMode.checked ? 'Dark' : 'Light'}).svg`;
      // const filename = `${fromText.replace(/[/:*\?<>\|]/g, '').substr(0, 10).trim()} ↔ ${toText.replace(/[/:*\?<>\|]/g, '').substr(0, 10).trim()};
      dlLink.setAttribute('download', filename);
      dlLink.setAttribute('title', filename);
      dlLink.removeAttribute('hidden');
    }

    /** @returns {SVGElement} */
    function createSvgElement(tagName) {
      return document.createElementNS('http://www.w3.org/2000/svg', tagName);
    }

    function parseAlignmentResult(alignmentResultStr) {
      const numbers = alignmentResultStr.split(',').map(x => parseInt(x));
      if (numbers.length % 4 != 0 || numbers.some(isNaN)) {
        return [];
      }
      const result = [];
      for (let i = 0; i < numbers.length; i += 4) {
        result.push({
          fromStart: numbers[i],
          fromEnd: numbers[i + 1],
          toStart: numbers[i + 2],
          toEnd: numbers[i + 3],
        });
      }
      return result;
    }

    function removePunctuationAlignments(result, fromText, toText) {
      return result.filter(({ fromStart, fromEnd, toStart, toEnd }) => {
        const from = fromText.substring(fromStart, fromEnd);
        const to = toText.substring(toStart, toEnd);

        if (!/\p{L}/u.test(from) && !/\p{L}/u.test(to)) {
          console.log(`Skipping alignment of punctuation/symbol: ${from} (${fromStart}) => ${to} (${toStart})`);
          return false;
        }

        return true;
      });
    }

    /**
     * Merges alignments where one side points to the exact same range and the
     * other side is overlapping or adjacent.
     */
    function mergeAlignments(result, fromText, toText) {
      const removed = new Set();
      let modifiedList;
      do {
        modifiedList = false;
        for (let i = 0; i < result.length; i++) {
          const cur = result[i];
          if (removed.has(cur)) {
            continue;
          }

          for (let j = i + 1; j < result.length; j++) {
            const other = result[j];
            if (removed.has(other)) {
              continue;
            }

            if (
              isOverlappingOrAdjacent(cur.fromStart, cur.fromEnd, other.fromStart, other.fromEnd, fromText) &&
              other.toStart == cur.toStart &&
              other.toEnd == cur.toEnd
            ) {
              // Merge adjacent/overlapping 'from' tokens (allowing a space in between) that point to the same 'to' range
              console.log(`Merging ${fromText.substring(other.fromStart, other.fromEnd)} (${other.fromStart}) => ${toText.substring(other.toStart, other.toEnd)} (${other.toStart}) with ${fromText.substring(cur.fromStart, cur.fromEnd)} (${cur.fromStart}) => ${toText.substring(cur.toStart, cur.toEnd)} (${cur.toStart})`);
              cur.fromStart = Math.min(cur.fromStart, other.fromStart);
              cur.fromEnd = Math.max(cur.fromEnd, other.fromEnd);
              removed.add(other);
              modifiedList = true;
            }
            else if (
              isOverlappingOrAdjacent(cur.toStart, cur.toEnd, other.toStart, other.toEnd, toText) &&
              other.fromStart == cur.fromStart &&
              other.fromEnd == cur.fromEnd
            ) {
              // Merge adjacent/overlapping 'to' tokens (allowing a space in between) that point to the same 'from' range
              console.log(`Merging ${fromText.substring(other.fromStart, other.fromEnd)} (${other.fromStart}) => ${toText.substring(other.toStart, other.toEnd)} (${other.toStart}) with ${fromText.substring(cur.fromStart, cur.fromEnd)} (${cur.fromStart}) => ${toText.substring(cur.toStart, cur.toEnd)} (${cur.toStart})`);
              cur.toStart = Math.min(cur.toStart, other.toStart);
              cur.toEnd = Math.max(cur.toEnd, other.toEnd);
              removed.add(other);
              modifiedList = true;
            }
          }
        }
        result = result.filter(x => !removed.has(x));
      } while (modifiedList);
      return result;
    }

    /**
     * Returns true if [start1,end1) overlaps with, touches, or is separated by
     * only whitespace from [start2,end2).
     */
    function isOverlappingOrAdjacent(start1, end1, start2, end2, text) {
      return (end1 < start2 && !/\S/.test(text.substring(end1, start2))) ||
             (start1 <= end2 && end1 >= start2) ||
             (start1 > end2 && !/\S/.test(text.substring(end2, start1)));
    }

    function createTextElement(str, id, attrs = {}) {
      const text = createSvgElement('text');
      text.id = id;
      text.setAttribute('text-anchor', 'start');
      text.setAttribute('dominant-baseline', 'hanging');

      for (let [attr, value] of Object.entries(attrs)) {
        text.setAttribute(attr, value);
      }

      for (let i = 0; i < str.length; i++) {
        const tspan = createSvgElement('tspan');
        tspan.textContent = str[i];
        tspan.id = id + i;

        text.appendChild(tspan);
      }

      return text;
    }

    function centerHorizontally(el1, el2) {
      const box1 = el1.getBBox();
      const box2 = el2.getBBox();
      if (box1.width > box2.width) {
        el2.setAttribute('x', (box1.width - box2.width) / 2);
      } else if (box2.width > box1.width) {
        el1.setAttribute('x', (box2.width - box1.width) / 2);
      }
    }

    function setViewBox(svg) {
      const size = Array.from(svg.children).reduce((size, el) => {
        if ('getBBox' in el) {
          const bbox = el.getBBox();
          size.width = Math.max(size.width, Math.ceil(bbox.x + bbox.width));
          size.height = Math.max(size.height, Math.ceil(bbox.y + bbox.height));
        }
        return size;
      }, { width: 0, height: 0 });
      svg.setAttribute('viewBox', `0 0 ${size.width} ${size.height}`);
    }

    function getCharacterRangeRect(svg, textId, start, end) {
      const startBox = svg.getElementById(textId + start)?.getBBox();
      const endBox = svg.getElementById(textId + (end - 1))?.getBBox();

      if (!startBox) {
        console.error(`Missing element #${textId + start} (alignment doesn't match text?).`);
      }
      if (!endBox) {
        console.error(`Missing element #${textId + (end - 1)} (alignment doesn't match text?).`);
      }

      return {
        top: Math.min(startBox.y, endBox.y),
        left: Math.min(startBox.x, endBox.x),
        right: Math.max(startBox.x + startBox.width, endBox.x + endBox.width),
        bottom: Math.max(startBox.y + startBox.height, endBox.y + endBox.height),
        get width() {
          return this.right - this.left;
        },
        get height() {
          return this.bottom - this.top;
        }
      };
    }

    /**
     * Because there's a gap between the text and the line (LINE_SPACING +/- the
     * offsets), the x position of both ends of the line need to be offset, so
     * as to "crop" the line and make it seem it continues to the correct spot
     * in the text.
     *
     * Returns the offset for the top point. Invert for the bottom point.
     */
    function calculateXOffset(x1, x2) {
      const totalTextSpacing = TEXT_SPACING + (LINE_ORIGIN_OFFSET * 2)
      return (LINE_SPACING / totalTextSpacing) * Math.abs(x1 - x2) * (x1 > x2 ? -1 : 1);
    }

    /** @param {SVGElement} svg */
    function drawAlignment(svg, fromStart, fromEnd, toStart, toEnd, color) {
      const fromRect = getCharacterRangeRect(svg, FROM_TEXT_ID, fromStart, fromEnd);
      const toRect = getCharacterRangeRect(svg, TO_TEXT_ID, toStart, toEnd);

      // Draw line
      let x1 = fromRect.left + (fromRect.width / 2);
      let x2 = toRect.left + (toRect.width / 2);
      let xOffset = calculateXOffset(x1, x2);
      x1 += xOffset;
      x2 -= xOffset;

      const line = createSvgElement('line');
      line.setAttribute('x1', x1);
      line.setAttribute('y1', fromRect.bottom + LINE_SPACING - LINE_ORIGIN_OFFSET);
      line.setAttribute('x2', x2);
      line.setAttribute('y2', toRect.top - LINE_SPACING + LINE_ORIGIN_OFFSET);
      line.setAttribute('stroke', color);
      line.setAttribute('stroke-width', '2');

      svg.appendChild(line);

      // Set text color
      for (let i = fromStart; i < fromEnd; i++) {
        svg.getElementById(FROM_TEXT_ID + i).setAttribute('fill', color);
      }

      for (let i = toStart; i < toEnd; i++) {
        svg.getElementById(TO_TEXT_ID + i).setAttribute('fill', color);
      }

      // Draw highlight rectangles under text
      const drawHighlight = (rect, offsetTop, offsetBottom) => {
        const highlight = createSvgElement('rect');
        highlight.setAttribute('x', rect.left);
        highlight.setAttribute('y', rect.top + offsetTop);
        highlight.setAttribute('width', rect.width);
        highlight.setAttribute('height', rect.height - offsetTop - offsetBottom);
        // rectEl.setAttribute('rx', '5');
        highlight.setAttribute('fill', color);
        highlight.setAttribute('opacity', darkMode.checked ? '0.08' : '0.14');

        svg.insertBefore(highlight, svg.querySelector('text'));
      };

      drawHighlight(fromRect, 0, 0.1 * EM);
      drawHighlight(toRect, 0.1 * EM, 0);
    }

    function createDownloadableSvg(svg) {
      svg = svg.cloneNode(true);
      for (let el of svg.querySelectorAll('[id]')) {
        el.removeAttribute('id');
      }
      // for (let text of svg.querySelectorAll('text')) {
      //   text.innerHTML = text.textContent;
      // }
      return '<?xml version="1.0" standalone="yes"?>\n' + svg.outerHTML;
    }

    function isJapanese(text) {
      return /[一-龠ぁ-ゔァ-ヴー]/.test(text);
    }

    function createPalette(name, dark) {
      switch (name) {
        case 'material':
          const material = {
            "red": {
              "50": "#ffebee",
              "100": "#ffcdd2",
              "200": "#ef9a9a",
              "300": "#e57373",
              "400": "#ef5350",
              "500": "#f44336",
              "600": "#e53935",
              "700": "#d32f2f",
              "800": "#c62828",
              "900": "#b71c1c",
              "a100": "#ff8a80",
              "a200": "#ff5252",
              "a400": "#ff1744",
              "a700": "#d50000"
            },
            "pink": {
              "50": "#fce4ec",
              "100": "#f8bbd0",
              "200": "#f48fb1",
              "300": "#f06292",
              "400": "#ec407a",
              "500": "#e91e63",
              "600": "#d81b60",
              "700": "#c2185b",
              "800": "#ad1457",
              "900": "#880e4f",
              "a100": "#ff80ab",
              "a200": "#ff4081",
              "a400": "#f50057",
              "a700": "#c51162"
            },
            "purple": {
              "50": "#f3e5f5",
              "100": "#e1bee7",
              "200": "#ce93d8",
              "300": "#ba68c8",
              "400": "#ab47bc",
              "500": "#9c27b0",
              "600": "#8e24aa",
              "700": "#7b1fa2",
              "800": "#6a1b9a",
              "900": "#4a148c",
              "a100": "#ea80fc",
              "a200": "#e040fb",
              "a400": "#d500f9",
              "a700": "#aa00ff"
            },
            "deeppurple": {
              "50": "#ede7f6",
              "100": "#d1c4e9",
              "200": "#b39ddb",
              "300": "#9575cd",
              "400": "#7e57c2",
              "500": "#673ab7",
              "600": "#5e35b1",
              "700": "#512da8",
              "800": "#4527a0",
              "900": "#311b92",
              "a100": "#b388ff",
              "a200": "#7c4dff",
              "a400": "#651fff",
              "a700": "#6200ea"
            },
            "indigo": {
              "50": "#e8eaf6",
              "100": "#c5cae9",
              "200": "#9fa8da",
              "300": "#7986cb",
              "400": "#5c6bc0",
              "500": "#3f51b5",
              "600": "#3949ab",
              "700": "#303f9f",
              "800": "#283593",
              "900": "#1a237e",
              "a100": "#8c9eff",
              "a200": "#536dfe",
              "a400": "#3d5afe",
              "a700": "#304ffe"
            },
            "blue": {
              "50": "#e3f2fd",
              "100": "#bbdefb",
              "200": "#90caf9",
              "300": "#64b5f6",
              "400": "#42a5f5",
              "500": "#2196f3",
              "600": "#1e88e5",
              "700": "#1976d2",
              "800": "#1565c0",
              "900": "#0d47a1",
              "a100": "#82b1ff",
              "a200": "#448aff",
              "a400": "#2979ff",
              "a700": "#2962ff"
            },
            "lightblue": {
              "50": "#e1f5fe",
              "100": "#b3e5fc",
              "200": "#81d4fa",
              "300": "#4fc3f7",
              "400": "#29b6f6",
              "500": "#03a9f4",
              "600": "#039be5",
              "700": "#0288d1",
              "800": "#0277bd",
              "900": "#01579b",
              "a100": "#80d8ff",
              "a200": "#40c4ff",
              "a400": "#00b0ff",
              "a700": "#0091ea"
            },
            "cyan": {
              "50": "#e0f7fa",
              "100": "#b2ebf2",
              "200": "#80deea",
              "300": "#4dd0e1",
              "400": "#26c6da",
              "500": "#00bcd4",
              "600": "#00acc1",
              "700": "#0097a7",
              "800": "#00838f",
              "900": "#006064",
              "a100": "#84ffff",
              "a200": "#18ffff",
              "a400": "#00e5ff",
              "a700": "#00b8d4"
            },
            "teal": {
              "50": "#e0f2f1",
              "100": "#b2dfdb",
              "200": "#80cbc4",
              "300": "#4db6ac",
              "400": "#26a69a",
              "500": "#009688",
              "600": "#00897b",
              "700": "#00796b",
              "800": "#00695c",
              "900": "#004d40",
              "a100": "#a7ffeb",
              "a200": "#64ffda",
              "a400": "#1de9b6",
              "a700": "#00bfa5"
            },
            "green": {
              "50": "#e8f5e9",
              "100": "#c8e6c9",
              "200": "#a5d6a7",
              "300": "#81c784",
              "400": "#66bb6a",
              "500": "#4caf50",
              "600": "#43a047",
              "700": "#388e3c",
              "800": "#2e7d32",
              "900": "#1b5e20",
              "a100": "#b9f6ca",
              "a200": "#69f0ae",
              "a400": "#00e676",
              "a700": "#00c853"
            },
            "lightgreen": {
              "50": "#f1f8e9",
              "100": "#dcedc8",
              "200": "#c5e1a5",
              "300": "#aed581",
              "400": "#9ccc65",
              "500": "#8bc34a",
              "600": "#7cb342",
              "700": "#689f38",
              "800": "#558b2f",
              "900": "#33691e",
              "a100": "#ccff90",
              "a200": "#b2ff59",
              "a400": "#76ff03",
              "a700": "#64dd17"
            },
            "lime": {
              "50": "#f9fbe7",
              "100": "#f0f4c3",
              "200": "#e6ee9c",
              "300": "#dce775",
              "400": "#d4e157",
              "500": "#cddc39",
              "600": "#c0ca33",
              "700": "#afb42b",
              "800": "#9e9d24",
              "900": "#827717",
              "a100": "#f4ff81",
              "a200": "#eeff41",
              "a400": "#c6ff00",
              "a700": "#aeea00"
            },
            "yellow": {
              "50": "#fffde7",
              "100": "#fff9c4",
              "200": "#fff59d",
              "300": "#fff176",
              "400": "#ffee58",
              "500": "#ffeb3b",
              "600": "#fdd835",
              "700": "#fbc02d",
              "800": "#f9a825",
              "900": "#f57f17",
              "a100": "#ffff8d",
              "a200": "#ffff00",
              "a400": "#ffea00",
              "a700": "#ffd600"
            },
            "amber": {
              "50": "#fff8e1",
              "100": "#ffecb3",
              "200": "#ffe082",
              "300": "#ffd54f",
              "400": "#ffca28",
              "500": "#ffc107",
              "600": "#ffb300",
              "700": "#ffa000",
              "800": "#ff8f00",
              "900": "#ff6f00",
              "a100": "#ffe57f",
              "a200": "#ffd740",
              "a400": "#ffc400",
              "a700": "#ffab00"
            },
            "orange": {
              "50": "#fff3e0",
              "100": "#ffe0b2",
              "200": "#ffcc80",
              "300": "#ffb74d",
              "400": "#ffa726",
              "500": "#ff9800",
              "600": "#fb8c00",
              "700": "#f57c00",
              "800": "#ef6c00",
              "900": "#e65100",
              "a100": "#ffd180",
              "a200": "#ffab40",
              "a400": "#ff9100",
              "a700": "#ff6d00"
            },
            "deeporange": {
              "50": "#fbe9e7",
              "100": "#ffccbc",
              "200": "#ffab91",
              "300": "#ff8a65",
              "400": "#ff7043",
              "500": "#ff5722",
              "600": "#f4511e",
              "700": "#e64a19",
              "800": "#d84315",
              "900": "#bf360c",
              "a100": "#ff9e80",
              "a200": "#ff6e40",
              "a400": "#ff3d00",
              "a700": "#dd2c00"
            },
            "brown": {
              "50": "#efebe9",
              "100": "#d7ccc8",
              "200": "#bcaaa4",
              "300": "#a1887f",
              "400": "#8d6e63",
              "500": "#795548",
              "600": "#6d4c41",
              "700": "#5d4037",
              "800": "#4e342e",
              "900": "#3e2723"
            },
            "bluegrey": {
              "50": "#eceff1",
              "100": "#cfd8dc",
              "200": "#b0bec5",
              "300": "#90a4ae",
              "400": "#78909c",
              "500": "#607d8b",
              "600": "#546e7a",
              "700": "#455a64",
              "800": "#37474f",
              "900": "#263238"
            }
          };

          return [
            material.red,
            material.purple,
            material.indigo,
            material.lightblue,
            material.lightgreen,
            material.amber,
          ].map(color => color[dark ? '300' : '800']);
        case 'one':
          return dark ? [
            '#be5046', // Red
            '#e06c75', // Light red
            '#d19a66', // Orange
            '#e5c07b', // Yellow
            '#98c379', // Green
            '#61afef', // Blue
            '#56b6c2', // Cyan
            '#c678dd', // Purple
          ] : [
            '#ca1243', // Red
            '#e45649', // Light red
            '#986801', // Orange
            '#c18401', // Yellow
            '#50a14f', // Green
            '#4078f2', // Blue
            '#0184bc', // Cyan
            '#a626a4', // Purple
          ];
      }
    }
  </script>

</body>
</html>
